CREATE DATABASE CANINA_PELUQUERIA;
USE CANINA_PELUQUERIA;

CREATE TABLE DUEÑO (
DNI INT NOT NULL,
NOMBRE VARCHAR(50) NOT NULL,
APELLIDO VARCHAR(50) NOT NULL,
TELEFONO INT,
DIRECCION VARCHAR(150),
PRIMARY KEY(DNI)
);
CREATE TABLE PERRO (
ID_PERRO INT NOT NULL auto_increment,
NOMBRE VARCHAR(150),
FECHA_NAC DATE,
SEXO VARCHAR (15),
DNI_DUEÑO INT NOT NULL,
PRIMARY KEY(ID_PERRO),
FOREIGN KEY(DNI_DUEÑO) REFERENCES DUEÑO(DNI),
INDEX ID_NOMBREPERRO(NOMBRE)
);
CREATE TABLE HISTORIAL (
ID_HISTORIAL INT NOT NULL auto_increment,
FECHA DATE,
PERRO VARCHAR(250),
DESCRIPCION VARCHAR(350),
MONTO INT,
PRIMARY KEY(ID_HISTORIAL),
FOREIGN KEY (PERRO) REFERENCES PERRO(NOMBRE)
);
 
INSERT INTO DUEÑO (DNI, NOMBRE, APELLIDO, TELEFONO, DIRECCION) VALUES (22424812, "CARLOS OMAR", "AMATI", 421233, " CALLE AMERICA N°1126");
INSERT INTO DUEÑO (DNI, NOMBRE, APELLIDO, TELEFONO, DIRECCION) VALUES (23990857, "CAROLA BEATRIZ", "JAIME", 1457185, " CALLE AMERICA N° 752");
INSERT INTO DUEÑO (DNI, NOMBRE, APELLIDO, TELEFONO, DIRECCION) VALUES (24864814, "FABIANA EDITH", "LINARES", 456233, " CALLE BELGRANO N° 280");
INSERT INTO DUEÑO (DNI, NOMBRE, APELLIDO, TELEFONO, DIRECCION) VALUES (23199346, "ARTURO ANGEL", "CALVIÑO", 634523, " CALLE JUAN MANUEL DE ROSAS N° 244");
INSERT INTO DUEÑO (DNI, NOMBRE, APELLIDO, TELEFONO, DIRECCION) VALUES (28105777, "PABLO DAMIAN", "CAMPOS", 535233, " CALLE INDEPENDENCIA N° 785");
INSERT INTO DUEÑO (DNI, NOMBRE, APELLIDO, TELEFONO, DIRECCION) VALUES (26312700, "WALTER OSCAR", "AVILA", 420378, " CALLE INDEPENDENCIA N° 578");

INSERT INTO PERRO (NOMBRE, FECHA_NAC, SEXO, DNI_DUEÑO) VALUES ("REX", "2019-06-21", "MACHO", 22424812);
INSERT INTO PERRO (NOMBRE, FECHA_NAC, SEXO, DNI_DUEÑO) VALUES ("IVO", "2020-07-15", "MACHO", 23990857);
INSERT INTO PERRO (NOMBRE, FECHA_NAC, SEXO, DNI_DUEÑO) VALUES ("POSI", "2022-07-25", "MACHO", 24864814);
INSERT INTO PERRO (NOMBRE, FECHA_NAC, SEXO, DNI_DUEÑO) VALUES ("NEGRO", "2017-04-09", "MACHO", 23199346);
INSERT INTO PERRO (NOMBRE, FECHA_NAC, SEXO, DNI_DUEÑO) VALUES ("SHOWY", "2016-08-23", "HEMBRA", 28105777);
INSERT INTO PERRO (NOMBRE, FECHA_NAC, SEXO, DNI_DUEÑO) VALUES ("LAICA", "2018-07-21", "HEMBRA", 26312700);

INSERT INTO HISTORIAL (FECHA, PERRO, DESCRIPCION, MONTO) VALUES ("2015-09-22", "REX", "OVEJERO", 2700); 
INSERT INTO HISTORIAL (FECHA, PERRO, DESCRIPCION, MONTO) VALUES ("2018-08-19", "IVO", "CHIHUAHUA", 5800); 
INSERT INTO HISTORIAL (FECHA, PERRO, DESCRIPCION, MONTO) VALUES ("2019-05-21", "POSI", "CALLEJERO", 700); 
INSERT INTO HISTORIAL (FECHA, PERRO, DESCRIPCION, MONTO) VALUES ("2020-12-27", "NEGRO", "CANICHE", 22000); 
INSERT INTO HISTORIAL (FECHA, PERRO, DESCRIPCION, MONTO) VALUES ("2021-02-23", "SHOWY", "LABRADOR", 4800); 
INSERT INTO HISTORIAL (FECHA, PERRO, DESCRIPCION, MONTO) VALUES ("2017-04-03", "LAICA", "OVEJERO", 10000);

/*
IMPLEMENTE LOS EJERCICIOS 7 Y 8
*/

INSERT INTO PERRO (ID_PERRO, NOMBRE, FECHA_NAC, SEXO, DNI_DUEÑO) VALUES ("10", "ROMEO", "2020-07-15", "HEMBRA", 35421338);


SELECT SUM(MONTO) FROM HISTORIAL;









